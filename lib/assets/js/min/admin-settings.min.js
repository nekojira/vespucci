!function($){"use strict";$(function(){$(".tiptip").tipTip({fadeIn:0,fadeOut:0})}),$(".marker-upload-button").click(function(e){e.preventDefault();var attachment,button=this,field=$(button).closest(".marker-uploader"),input=$(field).find("input.uploaded-marker-url");if(marker_uploader)return marker_uploader.open(),void 0;var marker_uploader=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1});marker_uploader.on("select",function(){attachment=marker_uploader.state().get("selection").first().toJSON(),input.val(attachment.url),input.blur()}),marker_uploader.open()}),$(".locations").each(function(){var choices=$(this).find(".location"),chosenLocations=$(this).find(".selected-locations"),selections={};choices.each(function(){function updateSelections(checkbox){checkbox.prop("checked")?(selections[name]=marker.val(),marker.removeClass("disabled").removeAttr("disabled"),button.removeClass("disabled").removeAttr("disabled")):(delete selections[name],marker.addClass("disabled").attr("disabled","disabled"),button.addClass("disabled").attr("disabled","disabled"));var value=JSON.stringify(selections);chosenLocations.val(value)}var field=$(this).find(".checkbox"),name=field.val(),marker=$(this).find("input.uploaded-marker-url"),button=$(this).find("input.marker-upload-button");updateSelections(field),field.on("click",function(){updateSelections($(this))}),marker.on("change, blur",function(){updateSelections(field)})})})}(jQuery);